<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>店面選址專業評估 | 星橋創媒</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/assessment.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdns.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <!-- Chart.js for Dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard_renderer.js') }}"></script>
</head>

<body>
    <div class="background-mesh"></div>

    <header class="app-header">
        <div class="logo-container">
            <div class="logo-icon"><i class="fa-solid fa-location-dot"></i></div>
            <div class="logo-text">
                <h1>TIDAL CASSINI</h1>
                <span>智能選址評估系統</span>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="intro-section">
            <h2>店面選址專業評估表單</h2>
            <p>請輸入您的開店計畫資訊，我們的 AI 系統將為您進行多維度數據分析，並生成專業評估報告。</p>
        </div>

        <form id="assessmentForm" class="glass-panel">
            <!-- Hidden Fields for Google Form Entry IDs (Configured in JS) -->

            <div class="form-section">
                <h3><i class="fa-solid fa-store"></i> 基本選址資料</h3>
                <div class="grid-2">
                    <div class="form-group">
                        <label for="address">店面地址 <span class="required">*</span></label>
                        <input type="text" id="address" name="address" required placeholder="例如：台北市中山區松江路111號">
                    </div>
                    <div class="form-group">
                        <label for="industryType">產業類型 <span class="required">*</span></label>
                        <select id="industryType" name="industryType" required>
                            <option value="">請選擇...</option>
                            <option value="咖啡廳">咖啡廳</option>
                            <option value="火鍋店">火鍋店</option>
                            <option value="早午餐">早午餐</option>
                            <option value="手搖飲">手搖飲</option>
                            <option value="居酒屋/餐酒館">居酒屋/餐酒館</option>
                            <option value="拉麵/日式定食">拉麵/日式定食</option>
                            <option value="美髮沙龍">美髮沙龍</option>
                            <option value="零售店面">零售店面</option>
                            <option value="其他">其他 (請自行輸入)</option>
                        </select>
                        <input type="text" id="industryTypeOther" name="industryTypeOther" class="hidden mt-2"
                            placeholder="請輸入您的產業類型">
                    </div>
                    <div class="form-group">
                        <label for="areaSize">店面坪數 (坪) <span class="required">*</span></label>
                        <input type="number" id="areaSize" name="areaSize" required min="1" step="0.5">
                    </div>
                    <div class="form-group">
                        <label for="avgConsumption">預計客單價 (元) <span class="required">*</span></label>
                        <input type="number" id="avgConsumption" name="avgConsumption" required min="0" step="10">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3><i class="fa-solid fa-chart-line"></i> 商業決策資料</h3>
                <div class="grid-2">
                    <div class="form-group">
                        <label for="targetCustomers">目標客群</label>
                        <input type="text" id="targetCustomers" name="targetCustomers" placeholder="例如：25-35歲上班族、家庭客">
                    </div>
                    <div class="form-group">
                        <label for="businessHours">預期營業時間</label>
                        <input type="text" id="businessHours" name="businessHours" placeholder="例如：每日 11:00 - 21:00">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3><i class="fa-regular fa-id-card"></i> 聯絡資訊</h3>
                <div class="grid-2">
                    <div class="form-group">
                        <label for="contactName">聯絡人姓名</label>
                        <input type="text" id="contactName" name="contactName" required>
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">電子信箱 <span class="required">*</span></label>
                        <input type="email" id="contactEmail" name="contactEmail" required placeholder="接收報告用">
                    </div>
                </div>
            </div>

            <div class="action-bar">
                <button type="button" id="btnSubmitGoogle" class="btn secondary">
                    <i class="fa-brands fa-google"></i> 僅提交資料
                </button>
                <button type="submit" id="btnGenerateReport" class="btn primary">
                    <i class="fa-solid fa-wand-magic-sparkles"></i> 提交並生成專業報告
                </button>
            </div>
        </form>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="hidden">
            <div class="spinner-container">
                <div class="spinner"></div>
                <p>正在分析商圈大數據...</p>
                <ul class="loading-steps">
                    <li id="step1" class="step pending">連接地理資訊系統</li>
                    <li id="step2" class="step pending">分析周邊競品與人流</li>
                    <li id="step3" class="step pending">生成財務預測模型</li>
                    <li id="step4" class="step pending">產出專業評估報告</li>
                </ul>
            </div>
        </div>

        <!-- Result Section -->
        <div id="resultSection" class="hidden glass-panel">
            <div class="result-header">
                <h3><i class="fa-solid fa-check-circle"></i> 評估報告已生成</h3>
                <div class="result-actions">
                    <a id="btnDownloadPdf" href="#" class="btn download-btn" target="_blank">
                        <i class="fa-solid fa-file-pdf"></i> 下載 PDF 報告
                    </a>
                    <button id="btnReset" class="btn text-btn">重新評估</button>
                </div>
            </div>
            <div id="reportPreview" class="report-preview">
                <!-- HTML Preview will be injected here -->
            </div>
        </div>

    </main>

    <script src="{{ url_for('static', filename='js/assessment.js') }}"></script>
</body>

</html>